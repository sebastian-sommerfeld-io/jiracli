= build-and-run.sh

// +-----------------------------------------------+
// |                                               |
// |    DO NOT EDIT HERE !!!!!                     |
// |                                               |
// |    File is auto-generated by pipline.         |
// |    Contents are based on bash script docs.    |
// |                                               |
// +-----------------------------------------------+


Build, test and run the  Jira CLI locally.

== Overview

The script builds, tests and runs the `jiracli` app locally. The script runs all
testcases, builds a Docker container and runs the app inside the Docker container.

=== Script Arguments

* _$@_ (...): The same parameters as `jiracli` app.

=== Script Example

[source, bash]

----
./build-and-run.sh --help
----

== Index

* <<_go,go>>
* <<_format,format>>
* <<_test,test>>
* <<_build,build>>
* <<_run,run>>
* <<_init,init>>

=== go

Wrapper function to encapsulate `go` in a Docker container (`go` commands
are delegated to the link:https://hub.docker.com/_/golang[golang] Docker image).

The current working directory is mounted into the container and selected as working directory
so all files are available to `go`. Paths are not preserved. The working directory is placed
in `/app` (in the container) to make sure paths to the go app are the same everywhere (Go
wrapper container, Dev Container and all images built from `src/main/Dockerfile`). Keep in
mind that most functions in this script (which call this `go` wrapper function) first `cd`
into the `go` folder. So most of the time the current working direktory is not `src/main`
(where this script is placed) but `src/main/go`.

The go wrapper container runs with the current user.

==== Example

[,bash]
----
go version
----

==== Arguments

* *...* (String): The `jiracli` commands (1-n arguments) - $1 is mandatory

==== Exit codes

* *8*: If param with `go` command is missing

=== format

Format go source code. Before formatting, the function ``cd``s into the
`go` folder.

=== test

Run all test cases and security scanner. The function copies the
`src/main/app-info.yml` into the `go` folder to make sure it is mounted to the
same location for all containers (go wrapper container, dev container, jiracli images).
The temporairy `src/main/go/app-info.yml` is deleted when the tests are finished.

Before testing, the function ``cd``s into the `go` folder.

=== build

Build `local/jiracli:dev` Docker image.

=== run

Run `jiracli` app in Docker container.

==== Arguments

* *...* (String): The `jiracli` commands (1-n arguments) - $1 is mandatory

=== init

Initialize the go application in needed. Before initializing, the function
``cd``s into the `go` folder.
